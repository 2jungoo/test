#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <ctype.h>
int main(int argc, char *argv[]) {
    FILE *fp = stdin;  // 기본값: 표준 입력
    int ch;
    long char_count = 0;
    long word_count = 0;
    long line_count = 0;
    int in_word = 0;
    
    // 옵션 플래그
    int option_l = 0;
    int option_w = 0;
    int option_c = 0;
    
    char *filename = NULL;
    
    // 명령행 인수 파싱
    for (int i = 1; i < argc; i++) {
        if (strcmp(argv[i], "-l") == 0) {
            option_l = 1;
        } else if (strcmp(argv[i], "-w") == 0) {
            option_w = 1;
        } else if (strcmp(argv[i], "-c") == 0) {
            option_c = 1;
        } else {
            // 옵션이 아닌 경우 파일명으로 간주
            filename = argv[i];
        }
    }
    
    // 파일 열기
    if (filename != NULL) {
        fp = fopen(filename, "r");
        if (fp == NULL) {
            printf("파일 %s를 열 수 없습니다.\n", filename);
            return 1;
        }
    }
    
    // 파일 내용 분석
    while ((ch = fgetc(fp)) != EOF) {
        // 문자 개수 증가
        char_count++;
        
        // 줄 개수 증가
        if (ch == '\n') {
            line_count++;
        }
        
        // 단어 개수 세기
        if (isspace(ch)) {
            in_word = 0;
        } else {
            if (in_word == 0) {
                word_count++;
                in_word = 1;
            }
        }
    }
    
    // 결과 출력
    // 옵션이 하나도 없으면 모든 정보 출력
    if (!option_l && !option_w && !option_c) {
        printf("문자 개수: %ld\n", char_count);
        printf("단어 개수: %ld\n", word_count);
        printf("줄 개수: %ld\n", line_count);
    } else {
        // 지정된 옵션만 출력
        if (option_c) {
            printf("문자 개수: %ld\n", char_count);
        }
        if (option_w) {
            printf("단어 개수: %ld\n", word_count);
        }
        if (option_l) {
            printf("줄 개수: %ld\n", line_count);
        }
    }
    
    // 파일 닫기
    if (fp != stdin) {
        fclose(fp);
    }
    
    return 0;
}
